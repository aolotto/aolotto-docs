# ðŸŒŸ Drawing & Prizes

## **Drawing Time**

Aolotto does not have a fixed drawing time. Instead, each bet extends the drawing time by 24 hours from the most recent bet. If no new bets are placed, the drawing will occur 24 hours after the last bet. For example, if Player A places a bet at 11:00 AM on August 10, 2024, the drawing will initially be set for 11:00 AM on August 11, 2024. However, if Player B places a bet at 12:00 PM on August 10, 2024, the drawing time will be updated to 12:00 PM on August 11, 2024.

## **Betting Target**

The drawing mechanism used by Aolotto is inspired by Fomo3D, but with improvements. In Fomo3D, the game could continue indefinitely if new bets kept being placed, preventing any winner from being determined. To avoid this, Aolotto introduces a target betting amount for each round. Once the total bets in the round reach this target, no further bets will extend the drawing time.

For instance, if the target betting amount for the first round is $1000 and Player C places a bet at 11:00 AM on September 1, 2024, bringing the total to exactly $1000, the drawing time will be locked at 24 hours after Player Câ€™s betâ€”so at 11:00 AM on September 2, 2024. After this point, no further bets will change the drawing time.

The betting target is dynamic. The minimum target for the first round is $1000, and it increases as the game progresses.

**Betting Target Formula:**

$$
Betting Target=math.max(Previous Round Target,1000+Previous Round PrizeÃ—0.5)
$$

This mechanism is designed to foster growth in both the user base and the prize pool, ensuring the game remains sustainable.

## **Round Switching**

Aolotto protocol checks the drawing time every minute. Once the drawing time is reached, it will immediately take a snapshot of all participantsâ€™ betting data for that round and initiate the next round. Bets placed near the drawing time may be recorded in the next round. The drawing, lucky number generation, and winner confirmation will occur after the round switch.

## **Lucky Number**

The lucky number is a randomly generated 3-digit number (ranging from 000 to 999), created using the Isaac Cipher's random number function. It is seeded with factors that are unpredictable in advance, including the hash of the drawing block, the roundâ€™s archive hash (Hash Digits), and the drawing timestamp. This ensures that the lucky number generation process is random, verifiable, and unpredictable:

1. **Unpredictability**: The block hash on Arweave is a unique ID generated from all the transactions in the block. Since the drawing occurs after the user has placed their bet, users cannot predict the contents of the block when they place their bet, nor can they foresee the exact drawing time or the transaction ID signed by the CU (Compute Unit).
2. **Verifiability**: The random number function based on Isaac Cipher produces a deterministic result when the seed is fixed, meaning the lucky number generated by CU nodes can be verified. This eliminates the possibility of "black-box" manipulation during the execution process.
3. **Randomness in Value Distribution**: The 3-digit lucky number is not generated all at once. Instead, each digit is determined sequentially by calling the random function, where the unified seed and position number serve as inputs. Each call generates a random digit between 0 and 9, ensuring the randomness of the number's distribution.

```lua
--[[
The seed for the drawing algorithm is created by concatenating the following pieces of information into a string:
  block.hash: The hash of the drawing block.
  archive_id: The message ID at the time the roundâ€™s archive is triggered.
  archived_id: The message ID sent after the archiving process is completed.
  latest_bet.idï¼šThe transaction ID of the last bet placed.
  tostring(os.time()): The timestamp of the drawing in milliseconds.
]]--
local seed = block.hash ..'_'..archive_id..'_'..archived_id.."_"..latest_bet.id.."_"..tostring(os.time())

--[[
The random algorithm calculates the values for each digit in the number, with a range of 0-9 for each digit. The values are determined sequentially, with each digit being influenced by the seed, position index, and the previous digitâ€™s result.]]--
local getLuckyNumber = function(seed,len)
  local numbers = ""
  for i = 1, len or 3 do
    local n = crypto.cipher.issac.random(0, 9, tostring(i)..seed..numbers)
    numbers = numbers .. n
  end
  return numbers
end

local luckyNumber = getLuckyNumber(seed,3)

```

## **Winners**

Once the lucky number is generated, only the bets with an exact 3-digit match will win. The participants whose bets match the lucky number will be the winners. If no bets match the lucky number in a round, the last person to place a bet will be the sole winner for that round.

## **Prizes and Distribution**

50% of the prize pool balance for each round will be allocated as the grand prize for that round. After the round ends, the remaining 50% of the prize pool will be carried over to the next round as the base prize. Therefore, the actual prize payout is 50% of the total prize pool.

Grand Prize Calculation:

$$
Grand Prize=(Base Prize+Total Bets)Ã—0.5
$$

1. **If there are bets that match the lucky number**: The grand prize will be divided proportionally among the bettors who have matched the lucky number. For example, if the lucky number is 002 and the grand prize is $9000, Player A has placed $2 worth of bets that match the lucky number, while Player B has placed $1 worth of matching bets. Then, Player A will receive $6000, and Player B will receive $3000.
2. **If no one matches the lucky number**: The last person to place a bet will be the sole winner. For example, if the grand prize is $9000, Player C, as the last bettor, will win the entire $9000.

This rule tends to favor the last player, who typically has a higher probability of winning (up to 50% higher than earlier participants). However, this does not mean that the earlier participants are at a disadvantage. Aolottoâ€™s protocol is designed with fairness, and it incorporates the **Bet2Mint** mechanism, which ensures that early bettors receive more $ALT rewards compared to later ones. The $ALT rewards come with long-term dividend benefits and community privileges, making it advantageous for early participants. Fairness remains a core principle in the design of the Aolotto protocol. Learn more about [**Bet2Mint**](https://docs.aolotto.com/en/usdalt#bet2mint).
